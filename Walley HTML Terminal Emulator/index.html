<html>
	<head>
		<title> Walley Language </title>
		<meta charset='uff8'>
		<script src="./jquery.js"></script>
		<script src="./jquery_terminal.js"></script>
		<link rel="stylesheet" type="text/css" href="./jquery_terminal.css">
		<script src="./walley.js"></script>
		<style type="text/css">
			#term_demo{
			}
		</style>
	</head>
	<body>
		<script type="text/javascript">
		// init walley language
		walley.init();
		jQuery(function($, undefined) {
		    $('body').terminal(function(command, term) {
		    		console.log = term.echo;
		    		console.error = term.echo;
			        if (command !== '') {
			            try {

			            	// run command
			            	var result = walley.runStr(command);

			            	/**
							* I have to add the code below to flush the buffer.
			            	**/
			            	walley.runStr('(print "\n")'); // flush buffer.

			            	// add to console
			            	term.echo(result);

			            } catch(e) {
			                term.error(new String(e));
			            }
			        }
			        else {
			           term.echo('');
			        }
			    },
			     {
			        greetings: "\nWalley Language 0.3.8499\n"+
                              "Porting to JavaScript using Emscripten 1.25.0\n"+
                              "Copyright (c) 2012-2014 Yiyi Wang\n"+
                              "All Rights Reserved\n" +
                              "Github: https://github.com/shd101wyy/WalleyLanguage\n",
			        name: 'walley',
			        height: 200,
			        prompt: 'walley> '});
		});

		</script>
	</body>
</html>
